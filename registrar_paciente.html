<!DOCTYPE html> 
<html lang="es"> 

<head>
  <meta charset="UTF-8">
  <title>Registrar Paciente</title>   
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light"> <!-- Fondo claro para toda la interfaz -->

  <div class="container mt-5"> <!-- Contenedor centrado con margen superior -->
    <div class="card shadow-sm"> <!-- Tarjeta visual para agrupar contenido -->

      <!-- Encabezado del formulario -->
      <div class="card-header bg-success text-white text-center">
        <h4>Registro de Paciente</h4>
      </div>

      <div class="card-body">
        <form id="registroPaciente"> <!-- Formulario principal -->

          <!-- Campo: Cédula -->
          <div class="mb-3">
            <label for="cedula" class="form-label">Cédula del Paciente</label>
            <input type="text" class="form-control" id="cedula" required>
          </div>

          <!-- Campos: Nombre y apellidos -->
          <div class="row mb-3">
            <div class="col-md-4">
              <label for="nombre" class="form-label">Nombre</label>
              <input type="text" class="form-control" id="nombre" required>
            </div>
            <div class="col-md-4">
              <label for="apellido1" class="form-label">Primer Apellido</label>
              <input type="text" class="form-control" id="apellido1" required>
            </div>
            <div class="col-md-4">
              <label for="apellido2" class="form-label">Segundo Apellido</label>
              <input type="text" class="form-control" id="apellido2">
            </div>
          </div>

          <!-- Datos demográficos -->
          <div class="row mb-3">
            <div class="col-md-4">
              <label for="fechaNacimiento" class="form-label">Fecha de Nacimiento</label>
              <input type="date" class="form-control" id="fechaNacimiento" required>
            </div>
            <div class="col-md-2">
              <label for="edad" class="form-label">Edad</label>
              <input type="number" class="form-control" id="edad" required>
            </div>
            <div class="col-md-6">
              <label for="estadoPaciente" class="form-label">Estado</label>
              <select class="form-select" id="estadoPaciente">
                <option value="Activo">Activo</option>
                <option value="Inactivo">Inactivo</option>
              </select>
            </div>
          </div>

          <!-- Información de contacto -->
          <div class="row mb-3">
            <div class="col-md-4">
              <label for="telefono" class="form-label">Teléfono</label>
              <input type="tel" class="form-control" id="telefono">
            </div>
            <div class="col-md-4">
              <label for="correo" class="form-label">Correo Electrónico</label>
              <input type="email" class="form-control" id="correo">
            </div>
            <div class="col-md-4">
              <label for="direccion" class="form-label">Dirección</label>
              <input type="text" class="form-control" id="direccion">
            </div>
          </div>

          <!-- Botón para guardar -->
          <div class="d-grid">
            <button type="submit" class="btn btn-success">Guardar Paciente</button>
          </div>
        </form>

        <!-- Mensaje que aparece luego del registro -->
        <div id="mensajeRegistro" class="mt-3 text-center"></div>
      </div>

      <!-- Pie del formulario -->
      <div class="card-footer text-center">
        <a href="panel_administrador.html" class="btn btn-outline-secondary">Volver al Panel</a>
      </div>
    </div>
  </div>

  <!-- Script Bootstrap para componentes dinámicos -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Función para generar una contraseña segura -->
  <script>
    function generarContrasenaAleatoria(longitud = 8) {
      const caracteres = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$%&";
      let contrasena = "";
      for (let i = 0; i < longitud; i++) {
        contrasena += caracteres.charAt(Math.floor(Math.random() * caracteres.length));
      }
      return contrasena;
    }

    // Maneja el envío del formulario y muestra credenciales generadas
    document.getElementById("registroPaciente").addEventListener("submit", function(e) {
      e.preventDefault();

      const cedula = document.getElementById("cedula").value.trim();
      const usuario = cedula;
      const contrasena = generarContrasenaAleatoria();

      // Muestra los datos en el área de resultados
      const mensaje = document.getElementById("mensajeRegistro");
      mensaje.innerHTML = `
        ✅ Paciente registrado correctamente.<br>
        <strong>Usuario generado:</strong> ${usuario}<br>
        <strong>Contraseña asignada:</strong> ${contrasena}
      `;
      mensaje.classList.add("text-success");

      // Limpia el formulario
      this.reset();
    });
  </script>
</body>
</html>
